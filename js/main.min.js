(()=>{var o={endpoint:"https://formspree.io/f/YOUR_FORM_ID",enabled:!1,successRedirect:null};function a(){document.querySelectorAll(".signup-form").forEach(function(e){e.addEventListener("submit",c);var t,i=e.querySelector('input[type="email"]'),n=(i&&(i.addEventListener("blur",function(){i.value.trim()&&l(i)}),i.addEventListener("input",function(){clearTimeout(t),i.value.trim()?t=setTimeout(function(){var e=i,t=e.value.trim(),n=e.getAttribute("aria-describedby");n&&document.getElementById(n),(t?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?(u(e),r):(t.includes("@")&&t.indexOf("@")<t.length-1&&u(e),s):u)(e)},300):u(i)}),i.addEventListener("change",function(){i.value.trim()&&l(i)})),e.querySelector('input[name="consent"]'));n&&n.addEventListener("change",function(){var e;n.checked?(d(n),(e=(e=n).closest(".form-checkbox-label"))&&e.classList.add("is-valid")):(e=(e=n).closest(".form-checkbox-label"))&&e.classList.remove("is-valid")})})}function r(e){e.classList.add("is-valid")}function s(e){e.classList.remove("is-valid")}function c(e){e.preventDefault();var t,n,i,s,r,a=e.target;(e=>{var t=!0;return l(e.querySelector('input[type="email"]'))||(t=!1),t=(e=>{var t=(t=e.getAttribute("aria-describedby"))?document.getElementById(t):null,n=e.closest(".form-checkbox-label");if(e.checked)return d(e),1;n&&n.classList.add("is-invalid"),t&&(t.textContent="You must agree to receive updates")})(e.querySelector('input[name="consent"]'))?t:!1})(a)&&(e=a.querySelector('input[type="email"]'),t=a.querySelector('input[name="user_type"]:checked'),n=a.querySelector('input[name="consent"]'),i={email:e.value.trim(),user_type:t?t.value:"property_owner",consent:n.checked?"yes":"no",timestamp:(new Date).toISOString(),source:window.location.href,form_location:a.getAttribute("data-form-location")||"unknown",_subject:"New Plowshare Waitlist Signup"},m(a,!0),o.enabled?(s=a,r=i,fetch(o.endpoint,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)}).then(function(e){if(m(s,!1),!e.ok)return e.json().then(function(e){throw new Error(e.error||"Submission failed")});o.successRedirect?window.location.href=o.successRedirect:(v(s,r.email),f(r))}).catch(function(e){m(s,!1);var t=s,n=e.message||"Something went wrong. Please try again.",i=t.querySelector(".form-submit-error"),r=(i&&i.remove(),document.createElement("div"));r.className="form-submit-error",r.setAttribute("role","alert"),r.setAttribute("aria-live","assertive"),r.innerHTML="<p>"+p(n)+"</p>",(i=t.querySelector('button[type="submit"]'))?i.parentNode.insertBefore(r,i):t.appendChild(r),setTimeout(function(){r.parentNode&&r.remove()},5e3),console.error("Form submission error:",e)})):setTimeout(function(){m(a,!1),v(a,i.email),f(i)},1e3))}function l(e){var t=e.value.trim(),n=e.getAttribute("aria-describedby"),n=n?document.getElementById(n):null;if(t){if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))return u(e),r(e),1;i(e,n,"Please enter a valid email address")}else i(e,n,"Please enter your email address")}function i(e,t,n){e.classList.add("is-invalid"),e.classList.remove("is-valid"),t&&(t.textContent=n,t.classList.add("is-visible")),e.setAttribute("aria-invalid","true")}function u(e){var t=e.getAttribute("aria-describedby"),t=t?document.getElementById(t):null;e.classList.remove("is-invalid"),t&&(t.textContent="",t.classList.remove("is-visible")),e.removeAttribute("aria-invalid")}function d(e){var t=e.getAttribute("aria-describedby"),t=t?document.getElementById(t):null,e=e.closest(".form-checkbox-label");e&&e.classList.remove("is-invalid"),t&&(t.textContent="")}function m(e,t){var n=e.querySelector('button[type="submit"]'),e=e.querySelectorAll("input");t?(n.classList.add("is-loading"),n.disabled=!0,n.setAttribute("aria-busy","true"),e.forEach(function(e){e.disabled=!0})):(n.classList.remove("is-loading"),n.disabled=!1,n.removeAttribute("aria-busy"),e.forEach(function(e){e.disabled=!1}))}function v(e,t){e.innerHTML='<div class="form-success" role="status" aria-live="polite"><h3>You\'re on the list!</h3><p>We\'ll send updates to <strong>'+p(t)+"</strong> when Plowshare launches in your area.</p></div>",e.classList.add("is-success")}function f(e){try{var t=JSON.parse(localStorage.getItem("plowshare_submissions")||"[]");t.push(e),localStorage.setItem("plowshare_submissions",JSON.stringify(t))}catch(e){console.log("Could not store submission:",e)}}function p(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}function y(){var i,n,r,s,a,o,c,l,u,t,d,m,e,v=document.querySelector(".app-carousel");function f(){var e=window.innerWidth;c=1024<=e?4:768<=e||480<=e?2:1}function p(){var e,t;return 0===n.length?0:(e=n[0].getBoundingClientRect(),t=parseInt(getComputedStyle(i).gap)||24,e.width+t)}function y(e){void 0===e&&(e=!0);var t=p(),n=Math.max(0,l-c),n=-(o=Math.max(0,Math.min(o,n)))*t,t=(m=d=n,i.style.transition=e?"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1)":"none",i.style.transform="translateX("+n+"px)",Math.max(0,l-c));r&&(r.disabled=0===o),s&&(s.disabled=t<=o),a.forEach(function(e,t){t===o?(e.classList.add("is-active"),e.setAttribute("aria-selected","true")):(e.classList.remove("is-active"),e.setAttribute("aria-selected","false"))})}function b(){0<o&&(o--,y())}function h(){var e=Math.max(0,l-c);o<e&&(o++,y())}function g(e){return e.type.includes("mouse")?e.pageX:e.touches[0].clientX}function L(e){u=!0,t=g(e),i.classList.add("is-dragging")}function E(e){u&&(e=g(e),d=m+(e-t),i.style.transform="translateX("+d+"px)")}function w(){var e,t;u&&(u=!1,i.classList.remove("is-dragging"),((e=d-m)<-(t=.2*p())?h:t<e?b:y)())}v&&(i=v.querySelector(".carousel-track"),n=v.querySelectorAll(".carousel-slide"),r=v.querySelector(".carousel-nav-prev"),s=v.querySelector(".carousel-nav-next"),a=v.querySelectorAll(".carousel-indicator"),0!==n.length)&&(o=0,c=1,l=n.length,u=!1,m=d=t=0,r&&r.addEventListener("click",b),s&&s.addEventListener("click",h),a.forEach(function(e,n){e.addEventListener("click",function(){var e,t;e=n,t=Math.max(0,l-c),o=Math.max(0,Math.min(e,t)),y()})}),i.addEventListener("touchstart",L,{passive:!0}),i.addEventListener("touchmove",E,{passive:!0}),i.addEventListener("touchend",w),i.addEventListener("mousedown",L),i.addEventListener("mousemove",E),i.addEventListener("mouseup",w),i.addEventListener("mouseleave",function(){u&&w()}),i.addEventListener("dragstart",function(e){e.preventDefault()}),v.addEventListener("keydown",function(e){"ArrowLeft"===e.key?b():"ArrowRight"===e.key&&h()}),window.addEventListener("resize",function(){clearTimeout(e),e=setTimeout(function(){f(),y(!1)},100)}),f(),y(!1))}function b(){var i=document.querySelector(".faq-accordion");i&&i.querySelectorAll(".faq-item").forEach(function(r){var s=r.querySelector(".faq-question"),a=r.querySelector(".faq-answer");s&&a&&(s.addEventListener("click",function(){var e,t,n,i="true"===s.getAttribute("aria-expanded");e=r,t=s,n=a,!i?(t.setAttribute("aria-expanded","true"),n.removeAttribute("hidden"),e.classList.add("is-open"),n.style.maxHeight=n.scrollHeight+"px"):(t.setAttribute("aria-expanded","false"),e.classList.remove("is-open"),n.style.maxHeight="0",setTimeout(function(){"false"===t.getAttribute("aria-expanded")&&n.setAttribute("hidden","")},300))}),s.addEventListener("keydown",function(e){var t=i.querySelectorAll(".faq-question"),n=Array.from(t).indexOf(s);switch(e.key){case"ArrowDown":e.preventDefault(),n<t.length-1&&t[n+1].focus();break;case"ArrowUp":e.preventDefault(),0<n&&t[n-1].focus();break;case"Home":e.preventDefault(),t[0].focus();break;case"End":e.preventDefault(),t[t.length-1].focus()}}))})}function e(){function e(){10<window.scrollY?r.classList.add("is-scrolled"):r.classList.remove("is-scrolled"),t=!1}var t,n,i,r,s;n=document.querySelector(".nav-toggle"),i=document.querySelector(".nav-menu"),r=document.querySelector(".site-header"),n&&i&&(n.addEventListener("click",function(){var e="true"===n.getAttribute("aria-expanded");n.setAttribute("aria-expanded",!e),i.classList.toggle("is-open"),document.body.style.overflow=e?"":"hidden"}),i.querySelectorAll("a").forEach(function(e){e.addEventListener("click",function(){n.setAttribute("aria-expanded","false"),i.classList.remove("is-open"),document.body.style.overflow=""})}),document.addEventListener("keydown",function(e){"Escape"===e.key&&i.classList.contains("is-open")&&(n.setAttribute("aria-expanded","false"),i.classList.remove("is-open"),document.body.style.overflow="",n.focus())}),document.addEventListener("click",function(e){!i.classList.contains("is-open")||i.contains(e.target)||n.contains(e.target)||(n.setAttribute("aria-expanded","false"),i.classList.remove("is-open"),document.body.style.overflow="")}),r)&&(t=!10,window.addEventListener("scroll",function(){t||(window.requestAnimationFrame(e),t=!0)},{passive:!0}),e()),(s=document.getElementById("current-year"))&&(s.textContent=(new Date).getFullYear()),document.querySelectorAll('a[href^="#"]').forEach(function(e){e.addEventListener("click",function(e){var t,n=this.getAttribute("href");"#"!==n&&(t=document.querySelector(n))&&(e.preventDefault(),t.scrollIntoView({behavior:"smooth",block:"start"}),history.pushState(null,"",n))})}),a(),y(),b()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()})();